# CarND-Path-Planning-Project
In this project, an attempt is made to create a autonomous vehicle path planner for highway driving. The path generated by the path planner shall be safe and comfortable for passengers. In particular, the path planner shall meet the following criterion:
1. Capable of safely driving at least 4.32 miles.
2. Obey the speed, acceleration, and jerk limit.
3. Collision-free
4. Capable of staying in its lanes
5. Capable of changing lanes as needed when it's safe to do so

### Design Philosophy
Due to the situation that I am very behind the schedule, the objective is to create a simple yet elegant path planner that meets the criterion. To reduce the time of the development and the risk of failure, the code for speed control and lane changing are adopted for the tutorial of the project. The new addition to the code is a finite state machine(FSM) that determines when to change lanes and which lane the ego vehicle will change to.

### Path Planner Design
In this section, each aspect of the path planner design will be discussed. To keep the mathematics simple, all the computation are carried out using Fernet coordinate under ego vehicle's local coordinate frame.
#### -Speed Control
The speed control is implemented using the approach explained in the tutorial. In each path planner's update cycle(e.g. 0.02 second), the vehicle's desired speed is changed by a small amount(e.g. 0.224) depending on the current speed, the speed limit, and the free space in front of the ego vehicle.
#### -Lane Following
To ensure the vehicle stays in its lane, the path planner use the x,y coordinates of the lane provided in the highway_map.csv file. Due to the sparsity of these way-points, we use spline to interpolate and re-sample them densely. This ensures the vehicle meet the criterion of the jerk.
#### -Lane Change
The lane change is handled in a similar way of lane following. When the lane change is needed, the path planner simply add new way-points in the new lane. The spline interpolation automatically smooth out the path and ensure everything is under the limit.
#### -FSM for Behaviour Control
The path planner use FSM to determine when lane change is needed and which lane the ego vehicle should change to. The rule we follow is very simple yet effective.
When the car in front of the ego vehicle is too close, the ego vehicle will see if any adjacent lanes are safe for lane change. The safety criterion are:
1. The ego vehicle is not too close to the vehicle in the front in the current lane.
2. The new lane has enough free space in front of the ego vehicle
3. There is no vehicle in the blind spot of the ego vehicle in the new lane.

The lane change will only be carried out when all the safety criterion are met.

Determining which lane to change to is simple. The highway has three lanes throughout the entire course. When the ego vehicle is in left or right lane, it will seek to change to the centre lane. When the ego vehicle is in the centre lane, it checks to see if left lane or right lane is available. If both are available, the ego vehicle chooses the one with larger free space.


### Performance and Limitations
In this section, we will analyze the performance and the limitation of the path planner. The testing is carried out in a highway drive simulator provided by Udacity. The simulator can give real-time feedback if criterion are met and provide visualization of the traffic condition in 3D.
#### Performance
The path planner is tested on the simulator for more than six hours. The best record is 161 miles without any incident.
#### Limitations
Due to the simplicity of this path planner, it does not create the most optimal path. The reason is that it does not predict the future locations of the vehicles. As a result, we have to be conservative and ensure there is enough room around the ego vehicle for a safe lane change, because some vehicles in the simulator change lanes and hit the break very aggressively.
